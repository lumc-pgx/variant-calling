import os

rule variants:
    input:
        gene = config["GENE"],
        reference = os.path.join("variant_calling/reference", os.path.splitext(os.path.basename(config["GENE"]))[0] + ".fasta"),
        alleles = "variant_calling/inputs/{barcode}.fasta"
    output:
        variants = "variant_calling/variants/{barcode}.json",
        alignments = "variant_calling/variants/{barcode}.aln"
    conda:
        "../envs/call_variants.yaml"
    script:
        "../scripts/call_variants.py"

